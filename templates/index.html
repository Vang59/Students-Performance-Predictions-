<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Student Performance Prediction</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  </head>
  
  <body>
    <div class="container">
        <div class="row">
          <div class="col-md-12 jumbotron text-center" style="background-color:#759295">
            <h1><span style = "color: #e5bc7f">Student Performance</span><span style="color: #bbe9ec"> Predictions</span></h1>
            <p><span style = "color: #e5bc7f">Upload csv files generated trough <a href="http://roycekimmons.com/tools/generated_data/exams">here</a> to test the models</span></p>
          </div>
        </div>
        <div class="row">
            <!--File Upload Selection-->
            <div class="col-md-3">
                <div class="well" style="background-color:#759295">
                    <form method="POST" enctype="multipart/form-data">
                        <label for="file"><span style = " color: #e5bc7f">Upload CSV file:</span></label>
                        <input type="file" name="file" id="file"><br><br>
                        <input type="submit" value="Submit">
                    </form>
                </div>
            </div>
            <!--MATH-->
            <div class="col-md-3 text-center">
                {% if df is defined %}
                {% if math_pred is defined and math_pred.all() %}
                <p style="font-weight: bold; color: #759295">Predicted Math Scores:</p>
                {% set match_count = df["math score"].eq(math_pred).sum() %}
                {% set match_percent = (match_count / df["math score"].__len__()) * 100 %}
                <p>The predicted scores accuracy is {{ "{:.0f}".format(match_percent) }}%.</p>
                {% endif %}
                <table style="border-collapse: collapse; width: 100%;">
                <thead>
                    <tr>
                        <th style="text-align: center; padding: 8px; border: 1px solid black; background-color: #e5bc7f;">Actual</th>
                        <th style="text-align: center; padding: 8px; border: 1px solid black; background-color: #e5bc7f;">Score</th>
                        <th style="text-align: center; padding: 8px; border: 1px solid black; background-color: #e5bc7f;">Match</th>
                    </tr>
                </thead>
                <!--body-->
                <tbody>
                    {% for i in range(0, df["math score"].__len__()) %}
                    <tr>
                        <td style="text-align: center; padding: 8px; border: 1px solid black;">{{ df["math score"][i] }}</td>
                        <td style="text-align: center; padding: 8px; border: 1px solid black;">{{ "{:.0f}".format(math_pred[i]) }}</td>
                        <td style="text-align: center; padding: 8px; border: 1px solid black; color: {% if df["math score"][i] == math_pred[i] %}green{% else %}red{% endif %}">{% if df["math score"][i] == math_pred[i] %}&#10003;{% else %}X{% endif %}</td>
                    </tr>
                    {% endfor %}
                </tbody>
                </table>
            </div>
            <!--READING-->
            <div class="col-md-3 text-center">
                {% if reading_pred is defined and reading_pred.all() %}
                <p style="font-weight: bold; color: #759295">Predicted Reading Scores:</p>
                {% set match_count = df["reading score"].eq(reading_pred).sum() %}
                {% set match_percent = (match_count / df["reading score"].__len__()) * 100 %}
                <p>The predicted scores accuracy is {{ "{:.0f}".format(match_percent) }}%.</p>
                {% endif %}
                <table style="border-collapse: collapse; width: 100%;">
                <thead>
                    <tr>
                        <th style="text-align: center; padding: 8px; border: 1px solid black; background-color: #e5bc7f;">Actual</th>
                        <th style="text-align: center; padding: 8px; border: 1px solid black; background-color: #e5bc7f;">Score</th>
                        <th style="text-align: center; padding: 8px; border: 1px solid black; background-color: #e5bc7f;">Match</th>
                    </tr>
                </thead>
                <!--body-->
                <tbody>
                    {% for i in range(0, df["reading score"].__len__()) %}
                    <tr>
                        <td style="text-align: center; padding: 8px; border: 1px solid black;">{{ df["reading score"][i] }}</td>
                        <td style="text-align: center; padding: 8px; border: 1px solid black;">{{ "{:.0f}".format(reading_pred[i]) }}</td>
                        <td style="text-align: center; padding: 8px; border: 1px solid black; color: {% if df["reading score"][i] == reading_pred[i] %}green{% else %}red{% endif %}">{% if df["reading score"][i] == reading_pred[i] %}&#10003;{% else %}X{% endif %}</td>
                    </tr>
                    {% endfor %}
                </tbody>
                </table>
            </div>
            <!--WRITING-->
            <div class="col-md-3 text-center color: #e5bc7f">
                {% if writing_pred is defined and writing_pred.all() %}
                <p style="font-weight: bold; color: #759295">Predicted Writing Scores:</p>
                {% set match_count = df["writing score"].eq(writing_pred).sum() %}
                {% set match_percent = (match_count / df["writing score"].__len__()) * 100 %}
                <p>The predicted scores accuracy is {{ "{:.0f}".format(match_percent) }}%.</p>
                {% endif %}
                <table style="border-collapse: collapse; width: 100%;">
                <thead>
                    <tr>
                        <th style="text-align: center; padding: 8px; border: 1px solid black; background-color: #e5bc7f;">Actual</th>
                        <th style="text-align: center; padding: 8px; border: 1px solid black; background-color: #e5bc7f;">Score</th>
                        <th style="text-align: center; padding: 8px; border: 1px solid black; background-color: #e5bc7f;">Match</th>
                    </tr>
                </thead>
                <!--body-->
                <tbody>
                    {% for i in range(0, df["writing score"].__len__()) %}
                    <tr>
                        <td style="text-align: center; padding: 8px; border: 1px solid black;">{{ df["writing score"][i] }}</td>
                        <td style="text-align: center; padding: 8px; border: 1px solid black;">{{ "{:.0f}".format(writing_pred[i]) }}</td>
                        <td style="text-align: center; padding: 8px; border: 1px solid black; color: {% if df["writing score"][i] == writing_pred[i] %}green{% else %}red{% endif %}">{% if df["writing score"][i] == writing_pred[i] %}&#10003;{% else %}X{% endif %}</td>
                    </tr>
                    {% endfor %}
                </tbody>
                </table>
                {% endif %}
            </div>
    </div>
  </body>
</html>